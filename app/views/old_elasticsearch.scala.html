@(esForm: play.data.Form[String], esProducts: java.util.List[models.Product])(implicit request: Http.Request)
@import helper._

@main("Elasticsearch"){
    <br>
    <div class="row">
        <div class="col">
            <a class="btn btn-outline-primary btn-shadow" href="@routes.HomeController.index()">Back to index</a>
        </div>
    </div>
    <br>
    <div class="row justify-content-center">

        <div class="col-11 admin-background">

            @*-- SEARCH BAR --*@
            <div class="row justify-content-around mt-5 mb-3">
            @form(action = routes.ElasticsearchController.searchProducts(), Symbol("class") -> "form-inline col-12 row justify-content-center") {
                @CSRF.formField
                @inputText(esForm("search"),
                    Symbol("_class") -> "form-group col-8", Symbol("class") -> "form-control es-form-search",
                    Symbol("_label") -> null,
                    Symbol("_showErrors") -> false,
                    Symbol("placeholder") -> "type your search here..."
                )
                <button id="searchByNameAndEditPictureBtn" type="submit" class="col-2 ml-3 btn btn-light btn-shadow btn-scala-form">search</button>
            }
            </div>

            @*-- SEARCH RESULTS --*@
            <div class="row justify-content-around mb-5 mt-2">
                @if(!esProducts.isEmpty) {
                    @if(esForm.hasErrors){
                        <div class="col-12 my-2 text-center esErrors">
                            <i>no
                                @if(esForm.error("ean").isPresent){<b>ean</b>}
                                @if(esForm.error("ean").isPresent && (esForm.error("name").isPresent || esForm.errors().size() > 1)){ or }
                                @if(esForm.error("name").isPresent){<b>name</b>}
                                @if(esForm.error("name").isPresent && esForm.error("description").isPresent){ or }
                                @if(esForm.error("description").isPresent){<b>description</b>}
                                 corresponding to your search has been found
                            </i>
                        </div>
                    }
                    @for(p <- esProducts) {
                        <a href="@routes.ProductController.showProduct(p.getEan)" class="col-xs-12 col-md-5 m-4 card product-card">
                            <div class="row justify-content-center card-header">
                                <h3 class="col-10 text-center">@p.getName</h3>
                            </div>
                            <div class="row justify-content-center card-body">
                                <div class="col-12 imgDiv">
                                    <img src="@routes.ProductController.showProductImage(p.getEan)" alt="picture of @p.getName"/>
                                </div>
                                <div class="col-10 text-center mt-3">@p.getDescription</div>
                                <div class="col-12 text-left mt-3 p-1 card-ean">EAN ref. @p.getEan</div>
                            </div>
                        </a>
                    }
                } else {
                    @if(esForm.field("search").value().isPresent){
                        <div class="col-12 my-2 text-center esErrors"><i>no product corresponding to your search has been found</i></div>
                    }
                }
            </div>
        </div>

        @*-- INDEXING BAR --*@
        <div class="col-11 admin-background bottom-bar mt-5">
            <div class="row justify-content-around">
                <div class="col-5 row justify-content-center my-4">
                    <div class="col-10">
                    @form(action = routes.ElasticsearchController.indexAllDbProducts() ) {
                        @CSRF.formField
                        <button type="submit" class="btn btn-block btn-warning">INDEX all products in ES</button>
                    }
                    </div>
                    <div class="col-10 mt-4">
                    @form(action = routes.ElasticsearchController.deleteAllProductsFromEs() ){
                        @CSRF.formField
                        <button type="submit" class="btn btn-block btn-danger">DELETE all ES products</button>
                    }
                    </div>
                </div>
                <div class="col-7 row justify-content-center mt-2">
                    @form(action = routes.ElasticsearchController.indexOneProductByEan(), Symbol("class") -> "form-inline col-12 row justify-content-center" ) {
                        @CSRF.formField
                        <div class="form-group col-6">
                            <input class="form-control es-form-ean" type="text" name="ean" placeholder="type ean...">
                        </div>
                        <button type="submit" class="col-5 ml-3 btn btn-block btn-light btn-shadow btn-scala-form">INDEX one product</button>
                    }
                </div>
            </div>

        </div>
    </div>
}